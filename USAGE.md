# 📖 使い方ガイド

建設工程管理アプリの詳細な操作マニュアルです。現場で迷わず使えるように、画像付きで分かりやすく説明します。

---

## 目次

1. [ガントチャートの基本操作](#1-ガントチャートの基本操作)
2. [タスクの作成と編集](#2-タスクの作成と編集)
3. [依存関係の設定](#3-依存関係の設定)
4. [リサイズ操作](#4-リサイズ操作)
5. [データバックアップ](#5-データバックアップ)
6. [土日祝日の設定](#6-土日祝日の設定)
7. [トラブルシューティング](#7-トラブルシューティング)

---

## 1. ガントチャートの基本操作

### 📊 ガントチャートとは？

工程をバー（横棒）で表示し、時間軸で管理するツールです。各バーが1つのタスクを表します。

### 基本的な見方

```
[タスク名]  ████████████░░░░  50%
           開始      今日  終了
```

- **青いバー**: 完了した部分
- **灰色のバー**: 未完了の部分
- **縦の赤線**: 今日の日付

### ナビゲーション

| 操作 | 方法 |
|------|------|
| **左右スクロール** | 横スクロールバーをドラッグ |
| **上下スクロール** | 縦スクロールバーをドラッグ |
| **拡大・縮小** | ズームコントロール（右上） |
| **今日にジャンプ** | 「今日」ボタンをクリック |

---

## 2. タスクの作成と編集

### ✏️ タスクを作成する

#### ステップ1: タスク追加ボタンをクリック
左サイドバーの「➕ タスク追加」ボタンをクリックします。

#### ステップ2: 基本情報を入力

| 項目 | 説明 | 例 |
|------|------|-----|
| **タスク名** | 作業の名前 | 「基礎工事」 |
| **開始日** | 作業開始日 | 2026/02/15 |
| **期間** | 営業日ベースの日数 | 5日間 |
| **担当者** | 責任者の名前 | 田中 |
| **フェーズ** | 工程の段階 | 基礎 |

#### ステップ3: 詳細オプション（任意）

- **優先度**: 高/中/低
- **進捗率**: 0-100%
- **説明**: 作業の詳細メモ
- **添付ファイル**: 図面や写真

#### ステップ4: 保存
「保存」ボタンをクリックすると、ガントチャートにバーが表示されます。

### 📝 タスクを編集する

1. ガントチャート上のタスクバーをクリック
2. 右側の詳細パネルが開きます
3. 項目を編集して「保存」

#### クイック編集

タスクバーを**右クリック**すると、クイックメニューが表示されます：

- 🗑️ 削除
- 📋 複製
- ⏸️ 一時停止
- ✅ 完了にする

---

## 3. 依存関係の設定

### 🔗 依存関係とは？

「AのタスクがBのタスクに依存している」= 「Aが終わらないとBを開始できない」という関係です。

### 依存関係の作成方法

#### ビジュアル操作（おすすめ）

1. **先行タスク**（先に終わるべきタスク）のバー右端にマウスをホバー
2. オレンジ色の🟠ハンドルが表示されます
3. そのまま**後続タスク**（後で始まるタスク）へドラッグ
4. 緑色の入力ポイントが表示されたらドロップ
5. ダイアログが開くので、依存タイプを選択

#### 依存タイプの種類

| タイプ | 略称 | 意味 | 例 |
|--------|------|------|-----|
| **終了→開始** | FS | Aが終わったらBを開始 | 基礎完了→構造開始 |
| **開始→開始** | SS | Aが始まったらBも開始 | 配管と配線を同時開始 |
| **終了→終了** | FF | Aが終わったらBも終了 | 検査と清掃を同時終了 |
| **開始→終了** | SF | Aが始まったらBを終了 | （稀なケース） |

#### ラグ/リード設定

- **ラグ（遅延）**: 先行タスク終了後、何日後に後続を開始するか
  - 例: 基礎工事終了 → **+3日** → 構造工事開始（養生期間）
- **リード（前倒し）**: 先行タスク終了前に後続を開始
  - 例: 配管工事終了 **-2日前** → 電気工事開始

#### キャンセル方法

ドラッグ中に**ESCキー**を押すと、操作をキャンセルできます。

### 依存関係の表示

- **矢印の色**: 
  - 🟦 青: 正常な依存関係
  - 🟥 赤: クリティカルパス（遅延すると全体に影響）
- **矢印の太さ**: 重要度（複数の依存関係がある場合）

### 依存関係の削除

1. 矢印をクリック
2. 表示されたメニューで「削除」を選択

---

## 4. リサイズ操作

### 📏 期間を変更する

タスクの期間をガントチャート上で直感的に変更できます。

#### 操作方法

1. **タスクバーの端にマウスをホバー**
   - 左端: 開始日を変更
   - 右端: 終了日を変更
2. **カーソルが⇔に変わる**ことを確認
3. **ドラッグして日数を調整**
4. **1日単位で自動スナップ**します
5. **ドロップして確定**

#### ビジュアルフィードバック

- **ホバー時**: ハンドルがハイライト表示
- **ドラッグ中**: バーが半透明になり、新しい期間がプレビュー
- **スナップ時**: 「カチッ」と触覚フィードバック（対応デバイスのみ）

#### 注意事項

⚠️ **最小期間**: タスクは最低1日必要です（0日にはできません）  
⚠️ **営業日計算**: 土日祝日を除外する設定の場合、自動的に営業日ベースで計算されます  
⚠️ **依存関係**: リサイズすると、依存している後続タスクが自動的に移動します

### 実用例

#### ケース1: 材料到着が遅れた
「配管工事」の開始を3日遅らせたい場合：

1. 配管工事バーの**左端**をドラッグ
2. 右に3日分移動
3. ドロップで確定

→ 依存している「電気工事」も自動的に3日遅れます

#### ケース2: 予想より早く完了しそう
「基礎工事」の期間を5日→3日に短縮したい場合：

1. 基礎工事バーの**右端**をドラッグ
2. 左に2日分移動
3. ドロップで確定

→ 後続の「構造工事」が2日前倒しになります

---

## 5. データバックアップ

### 💾 バックアップの重要性

- プロジェクトデータは**ブラウザのローカルストレージ**に保存されます
- ブラウザのキャッシュをクリアすると**データが消える**ことがあります
- 定期的なバックアップを強く推奨します

### バックアップ方法

#### ステップ1: バックアップダイアログを開く
画面上部の「💾 バックアップ」ボタンをクリックします。

#### ステップ2: エクスポート
1. 「📥 エクスポート」タブを選択
2. プロジェクト名を確認
3. 「ダウンロード」ボタンをクリック
4. JSON形式でファイルがダウンロードされます

**ファイル名の例**: `construction-project-2026-02-12.json`

### 復元方法

#### ステップ1: バックアップダイアログを開く
画面上部の「💾 バックアップ」ボタンをクリックします。

#### ステップ2: インポート
1. 「📤 インポート」タブを選択
2. 「ファイルを選択」ボタンをクリック
3. 保存したJSONファイルを選択
4. 「復元」ボタンをクリック

⚠️ **注意**: 復元すると、現在のプロジェクトデータが**上書き**されます。

### バックアップのベストプラクティス

✅ **毎日バックアップ**: 作業終了時に毎日エクスポート  
✅ **バージョン管理**: ファイル名に日付を含める  
✅ **クラウド保存**: Google DriveやDropboxに保存  
✅ **複数コピー**: パソコンとUSBメモリに保存

---

## 6. 土日祝日の設定

### 📅 営業日計算とは？

建設現場では土日や祝日は作業しないことが多いです。このアプリでは、営業日ベースで工期を計算できます。

### 設定方法

#### ステップ1: カレンダー設定を開く
1. 画面上部の「⚙️ 設定」ボタンをクリック
2. 「カレンダー設定」を選択

#### ステップ2: 除外設定を変更

| 設定項目 | 説明 |
|---------|------|
| **土日を除外** | ON: 土日をスキップして計算<br>OFF: 土日も営業日として計算 |
| **祝日を除外** | ON: 日本の祝日をスキップ<br>OFF: 祝日も営業日として計算 |

#### ステップ3: 保存
「保存」ボタンをクリックすると、すべてのタスクの終了日が再計算されます。

### 計算例

**タスク**: 基礎工事、期間5日、開始日: 2026/02/10（火）

#### 土日除外OFF の場合
```
2/10(火) 2/11(水) 2/12(木) 2/13(金) 2/14(土)
  1日目   2日目   3日目   4日目   5日目
終了日: 2/14(土)
```

#### 土日除外ON の場合
```
2/10(火) 2/11(水) 2/12(木) 2/13(金) [2/14(土)] [2/15(日)] 2/16(月) 2/17(火)
  1日目   2日目   3日目   4日目    スキップ   スキップ   5日目
終了日: 2/16(月)
```

### 対応している祝日

**2026年〜2030年**の日本の祝日に対応しています：

- 元日、成人の日、建国記念の日
- 天皇誕生日、春分の日、昭和の日
- 憲法記念日、みどりの日、こどもの日
- 海の日、山の日、敬老の日
- 秋分の日、スポーツの日、文化の日
- 勤労感謝の日

### 注意事項

⚠️ **振替休日は未対応**: 現在、振替休日は自動判定されません  
⚠️ **会社独自の休日**: 年末年始など、会社独自の休日は手動で調整してください

---

## 7. トラブルシューティング

### ❓ よくある質問

#### Q1: タスクが保存されない
**A**: 以下を確認してください：
- ブラウザのCookieを許可しているか
- プライベートモード（シークレットモード）ではないか
- ブラウザのストレージ容量が十分か

#### Q2: 依存関係の矢印が表示されない
**A**: 
1. 画面右上の「表示設定」を開く
2. 「依存関係を表示」がONになっているか確認

#### Q3: リサイズが効かない
**A**: 
- バーの**端**（左端または右端）にカーソルを合わせてください
- 中央部分をドラッグすると「移動」になります

#### Q4: データが消えた
**A**: 
- ブラウザのキャッシュをクリアすると消えます
- バックアップから復元してください
- 定期的なバックアップを推奨します

#### Q5: 祝日が反映されない
**A**: 
- カレンダー設定で「祝日を除外」がONになっているか確認
- 対応年度は2026-2030年です

### 🐛 バグを見つけた場合

GitHub Issuesで報告してください：
[https://github.com/niiyamakouki-byte/desktop-tutorial/issues](https://github.com/niiyamakouki-byte/desktop-tutorial/issues)

以下の情報を含めると解決が早くなります：
- ブラウザの種類とバージョン
- 操作手順（再現方法）
- スクリーンショット

### 💡 パフォーマンスが遅い場合

- **タスク数を減らす**: 100タスク以上になると重くなることがあります
- **ブラウザを再起動**: メモリをクリアします
- **拡張機能を無効化**: ブラウザ拡張が干渉している可能性があります

---

## 📞 サポート

さらに詳しい情報や質問は、以下をご覧ください：

- **GitHub Issues**: [問題を報告](https://github.com/niiyamakouki-byte/desktop-tutorial/issues)
- **README**: [プロジェクト概要](README.md)
- **CHANGELOG**: [変更履歴](CHANGELOG.md)

---

**📖 このガイドで不明な点があれば、お気軽にお問い合わせください！**
